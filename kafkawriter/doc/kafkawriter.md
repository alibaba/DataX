# DataX KafkaWriter

## 1 Introduction
KafkaWriter is a plugin for DataX to write data to Kafka Queue from dataX records.
The plugin is based on [Apache Kafka driver](https://github.com/apache/kafka)
to produce message to queue..


## 2 Detailed Implementation
KafkaWriter would use DataX to fetch records generated by DataX Reader, and then during each write batch, kafka writer 
iterate each record and parse it into JSON string with types supported and produce that message to Kafka.


## 3 Features
### 3.1 Example Configurations
* the following configuration would read some generated data in memory and produce data into Kafka topic.

#### Preparation

#### Configurations
```json
{
  "job": {
    "content": [
      {
        "reader": {
          "name": "cassandrareader",
          "parameter": {
            "host": "<cassandra-host>",
            "port": 9042,
            "username": "<username>",
            "password": "<pass>",
            "consitancyLevel": "ONE",
            "useSSL": false,
            "keyspace": "<keyspace>",
            "table": "<your_table>",
            "column": [
              "col1",
              "col2",
              "col3"
            ]
          }
        },
        "writer": {
          "name": "kafkawriter",
          "parameter": {
            "isSilence": true,
            "topic": "<your_topic>",
            "brokers": "<your_broker_addresses>",
            "column": [
              "col1",
              "col2",
              "col3"
            ]
          }
        }
      }
    ],
    "setting": {
      "speed": {
        "channel": "10"
      }
    }
  }
}
```

### 3.2 Configuration Description
* isSilence
    * Description: 
    * Required: yes
    * Default: True
* topic
    * Description: desired topic kafka
    * Required: yes
    * Default: ""
    * Example: "DEV.MY-TOPIC"
* brokers
    * Description: 1 or more brokers kafka address, seperate by ","
    * Required: yes
    * Default: ""
    * Example: "addr1,addr2"
* column
    * Description: A list of keys in Kafka JSON message.
    * Required: yes
    * Default: [""]
    * Example: ["key1", "key2", "key3"]

### 3.3 Type Convert
Data types in datax can be converted to the corresponding data types in databend. The following table shows the correspondence between the two types.

| DataX Type | Kafka Message Type |
|------------|--------------------|
| INT        | INT                |
| LONG       | LONG               |
| STRING     | STRING             |
| DOUBLE     | FLOAT              |
| BOOL       | BOOL               |
| DATE       | DATE               |
| BYTES      | BYTES              |


## 4 Performance Test


## 5 Restrictions
Currently, complex data type support is not stable, if you want to use complex data type such as tuple, array, please check further release version of databend and jdbc driver.

## FAQ
